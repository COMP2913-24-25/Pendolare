FROM python:3.9-slim

WORKDIR /src

COPY requirements.txt .
COPY test-requirements.txt .

# Install dependencies - install requirements.txt first, then test-requirements.txt
# This ensures that test dependencies don't override main dependencies
RUN pip install --no-cache-dir -r requirements.txt && \
    pip install --no-cache-dir -r test-requirements.txt

COPY . .

ENV PORT=5007
ENV TEST_GATEWAY=false

EXPOSE ${PORT}

CMD ["python", "test_client.py"]
